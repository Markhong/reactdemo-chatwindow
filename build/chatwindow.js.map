{"version":3,"sources":["webpack:///./page/chatwindow/chatwindow.jsx","webpack:///./page/control/MessageContent.jsx","webpack:///./page/control/chatwindowInput.jsx"],"names":["ChatWindow","state","message","type","name","content","time","Date","getHours","getMinutes","newMessage","newMins","newTime","split","latestMins","latestTime","length","newArrayMessage","setState","concat","sendHandle","bind","Component","render","document","getElementById","MessageContent","messagecontainer","refs","scrollTop","scrollHeight","messageContent","props","propsMessage","map","item","index","push","line","ChatWindowInput","textareaValue","value","event","target","chatinput","sendChange","focus","e","eve","window","keyCode","preventDefault","sendMessage","handleChange","keyDownSendMessage"],"mappings":"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","file":"chatwindow.js","sourcesContent":["import React from 'react';\r\nimport ReactDom from 'react-dom';\r\n\r\nimport MessageContent from '../control/MessageContent';\r\nimport ChatWindowInput from '../control/chatwindowInput';\r\n\r\nclass ChatWindow extends React.Component{\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\tmessage: [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype:\"0\",//operator\r\n\t\t\t\t\t\t\tname:\"Mark\",\r\n\t\t\t\t\t\t\tcontent: \"Hello, how may I help you?\",\r\n\t\t\t\t\t\t\ttime: new Date().getHours()+\":\"+new Date().getMinutes(),\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype:\"1\",//visitor\r\n\t\t\t\t\t\t\tname:\"Visitor\",\r\n\t\t\t\t\t\t\tcontent: \"I have a question about your product.\",\r\n\t\t\t\t\t\t\ttime: new Date().getHours()+\":\"+new Date().getMinutes(),\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t ]\r\n\t\t}\r\n\t}\r\n\t\r\n\tsendHandle(newMessage){\r\n\t\tlet newMins = 0;\r\n\t\tlet newTime = newMessage[0].time.split(\":\");\r\n\t\tnewMins = newTime[1];\r\n\r\n\t\tlet latestMins = 0;\r\n\t\tlet latestTime = this.state.message[this.state.message.length-1].time.split(\":\");\r\n\t\tlatestMins = latestTime[1];\r\n\r\n\t\tlet newArrayMessage;\r\n\t\tif ((newMins-latestMins)==0) {\r\n\t\t\tthis.state.message[this.state.message.length-1].content+=\"\\n\"+newMessage[0].content;\r\n\t\t\tthis.setState({\r\n\t\t\t\tmessage: this.state.message\r\n\t\t\t})\r\n\t\t}\r\n\t\telse{\r\n\t\t\tnewArrayMessage = this.state.message.concat(newMessage);\r\n\t\t\tthis.setState({\r\n\t\t\t\tmessage: newArrayMessage\r\n\t\t\t})\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\t\r\n\t}\r\n\trender(){\r\n\t\treturn (\r\n\t\t\t<div className=\"chatwindow-container\">\r\n\t\t\t\t<div className=\"header clearfix\">\r\n\t\t\t\t\t<img src=\"../../build/css/avatar.jpg\" className=\"avatar\" alt=\"\" width=\"50\" height=\"50\" />\r\n\t\t\t\t\t<div className=\"operatorinfo\">\r\n\t\t\t\t\t\t<div className=\"name\">Mark</div>\r\n\t\t\t\t\t\t<div className=\"title\">Sales</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"header-btn-container\">\r\n\t\t\t\t\t\t<i className=\"icon-resources icon-resources-minimize\"></i>\r\n\t\t\t\t\t\t<i className=\"icon-resources icon-resources-close\"></i>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<MessageContent propsMessage={this.state.message}/>\r\n\t\t\t\t<ChatWindowInput className=\"sspp\" name=\"mark2016\" value=\"\" sendChange={this.sendHandle.bind(this)}/>\r\n\t\t\t\t<div className=\"footer\">\r\n\t\t\t\t\t<i className=\"icon-resources icon-resources-email\"></i>\r\n\t\t\t\t\t<i className=\"icon-resources icon-resources-sendfile\"></i>\r\n\t\t\t\t\t<i className=\"icon-resources icon-resources-rate\"></i>\r\n\t\t\t\t\t<i className=\"icon-resources icon-resources-voice\"></i>\r\n\t\t\t\t\t<i className=\"icon-resources icon-resources-rename\"></i>\r\n\t\t\t\t\t<i className=\"icon-resources icon-resources-print\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nReactDom.render(\r\n\t<ChatWindow />,\r\n\tdocument.getElementById('chatwindow')\r\n);\n\n\n/** WEBPACK FOOTER **\n ** ./page/chatwindow/chatwindow.jsx\n **/","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\n\r\nexport default class MessageContent extends React.Component{\r\n\tconstructor(){\r\n\t\tsuper();\r\n\t}\r\n\tscrollToBottom(){\r\n\t\t\r\n\t}\r\n\r\n\tcomponentDidMount(){\r\n\t\t// this.refs.messagecontainer.scrollTop = this.refs.messagecontainer.scrollHeight;\r\n\t\t// alert(this.refs.messagecontainer.scrollHeight);\r\n\t}\r\n\tcomponentDidUpdate(){\r\n\t\tlet messagecontainer = this.refs.messagecontainer;\r\n\t\tmessagecontainer.scrollTop = messagecontainer.scrollHeight;\r\n\t}\r\n\trender(){\r\n\t\tlet messageContent=[];\r\n\t\tthis.props.propsMessage.map((item, index) => {\r\n\t\t\tif(item.type===\"0\"){\r\n\t\t\t\tmessageContent.push(<div key={index} className=\"chat-operator-message clearfix\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-operator-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-operator-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t{item.content}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-operator-time\">\r\n\t\t\t\t\t\t\t\t\t\t\t{item.time}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tmessageContent.push(<div key={index} className=\"chat-visitor-message clearfix\">\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-visitor-name\">\r\n\t\t\t\t\t\t\t\t\t\t\t{item.name}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-visitor-content\">\r\n\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\titem.content.split('\\n').map((line,index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div key={index}>{line}</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"chat-visitor-time\">\r\n\t\t\t\t\t\t\t\t\t\t\t{item.time}\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>);\r\n\t\t\t}\r\n\t\t})\r\n\t\treturn (\r\n\r\n\t\t\t<div className=\"messagecontainer\" ref=\"messagecontainer\">\r\n\t\t\t\t<div className=\"chat-system-message\">\r\n\t\t\t\t\tOperator Mark has joined the chat.\r\n\t\t\t\t</div>\r\n\t\t\t\t{messageContent}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./page/control/MessageContent.jsx\n **/","import React from 'react';\r\nimport ReactDom from 'react-dom';\r\n\r\nclass ChatWindowInput extends React.Component{\r\n\tconstructor(props){\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\ttextareaValue: props.value\r\n\t\t}\r\n\t}\r\n\r\n\thandleChange(event){\r\n\t\tthis.setState({\r\n\t\t\ttextareaValue: event.target.value \r\n\t\t});\r\n\t}\r\n\tsendMessage(){\r\n\t\tif(this.refs.chatinput.value){\r\n\t\t\tlet newMessage = [{\r\n\t\t\t\ttype:\"1\",\r\n\t\t\t\tname:\"Visitor\",\r\n\t\t\t\tcontent: this.refs.chatinput.value,\r\n\t\t\t\ttime: new Date().getHours()+\":\"+new Date().getMinutes(),\r\n\t\t\t}];\r\n\t\t\tthis.props.sendChange(newMessage);\r\n\r\n\t\t\tthis.setState({\r\n\t\t\t\ttextareaValue: \"\"\r\n\t\t\t});\r\n\t\t\tthis.refs.chatinput.focus();\r\n\r\n\t\t}\r\n\t}\r\n\tkeyDownSendMessage(e){\r\n\t\tvar eve = e || window.event;\r\n\t\tif(eve.keyCode == 13){\r\n\t\t\teve.preventDefault();\r\n\t\t\tthis.sendMessage();\r\n\t\t}\r\n\t}\r\n\tcomponentDidMount(){\r\n\t\t// this.props.scrollToBottom();\r\n\t}\r\n\trender(){\r\n\r\n\t\treturn (\r\n\t\t\t<div className={this.state.textareaValue?\"messageinput chatinput-focus\":\"messageinput\"}>\r\n\t\t\t\t<textarea id=\"chatinput\" \r\n\t\t\t\t\t\t  ref=\"chatinput\" \r\n\t\t\t\t\t\t  value={this.state.textareaValue} \r\n\t\t\t\t\t\t  onChange={this.handleChange.bind(this)}\r\n\t\t\t\t\t\t  onKeyDown={this.keyDownSendMessage.bind(this)}>\r\n\t\t\t    </textarea>\r\n\t\t\t\t<div className=\"messagesend\" onClick={this.sendMessage.bind(this)}>\r\n\t\t\t\t     <i className=\"icon-resources icon-resources-send\"></i>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default ChatWindowInput;\n\n\n/** WEBPACK FOOTER **\n ** ./page/control/chatwindowInput.jsx\n **/"],"sourceRoot":""}